!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("ticker",[],t):"object"==typeof exports?exports.ticker=t():n.ticker=t()}(window,function(){return function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";e.r(t);var r=0,o=[null,null,null],i=null,u=0,l=!1;function c(){return++u<x.allowedTickCount?function(){if(function(){l=!0;for(var n=0;n<o.length;n++){var t=o[n];t&&t.length>0&&(a(t),o[n]=null)}l=!1}(),function(){var n=i?i.length:0;if(i&&n>0)for(var t=0;t<n;t++){var e=i[t],r=e.priority;o[r]||(o[r]=[]);var u=o[r];u.push(e)}i=null}(),f())return h(),!1;return!0}():(console.warn("Animation frame loop executed to its set limit: ",x.allowedTickCount),h(),!1)}function a(n){for(var t=0;t<n.length;t++){var e=n[t];e.func.call(e)}}function f(){for(var n=0;n<o.length;n++){var t=o[n];if(t&&t.length>0)return!1}return!0}function s(){c()&&(r=window.requestAnimationFrame(s))}function h(){u=0,l=!1,o=[null,null,null],i=null,window?window.cancelAnimationFrame(r):clearTimeout(r)}function p(n){if(f()&&(r=window?window.requestAnimationFrame(s):setTimeout(s)),l)i||(i=[]),i.push(n);else{var t=n.priority;o[t]||(o[t]=[]),o[t].push(n)}}function b(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var y=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.progressCallback,this.doneCallback,this.errorCallback}return function(n,t,e){t&&b(n.prototype,t),e&&b(n,e)}(n,[{key:"onError",value:function(n){return this.errorCallback=n,this}},{key:"onProgress",value:function(n){return this.progressCallback=n,this}},{key:"onDone",value:function(n){return this.doneCallback=n,this}}]),n}(),d="Maximum Loop Per Frame has to be a number",v="Start Index has to be a number",m="End Index has to be a number";function w(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function k(n){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function g(n){if(!n)throw new Error("Ticker: instance can't be null");if(!(n instanceof x)){var t=n.constructor?n.constructor.name:k(n);throw new Error("Ticker: Expecting instance of TickEntry got ".concat(t))}if(!n.func)throw new Error("Ticker: function can't be undefined")}var x=function(){function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.context=e,this.func=t,this.priority=r,this.executionCount=0,this.notifier=new y,g(this)}return function(n,t,e){t&&w(n.prototype,t),e&&w(n,e)}(n,[{key:"onDone",value:function(n){return this.notifier.doneCallback=n,this.notifier}},{key:"onError",value:function(n){return this.notifier.errorCallback=n,this.notifier}},{key:"dispose",value:function(){this.context=null,this.func=null,this.priority=null,this.executionCount=NaN,this.notifier=null}},{key:"executeInCycle",value:function(){g(this);var n=this,t=n.func,e=n.context;return this.func=function(){var r=n.notifier,o=r.doneCallback,i=r.errorCallback;try{var u=t.call(e||t.this);n.func=t,n.executionCount++,o&&o.call(e||o.this,u)}catch(t){i&&i.call(e||i.this,t),n.dispose()}},p(this),this.notifier.onProgress=void 0,this.notifier}},{key:"executeAsSmallLoopsInCycle",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(void 0===n||"number"!=typeof n)throw new Error(d);if(void 0===t||"number"!=typeof t)throw new Error(m);if("number"!=typeof e)throw new Error(v);g(this);var r=this,o=r.func,i=r.context,u=n,l=e;return this.func=function(){for(var e,c=r.notifier,a=c.doneCallback,f=c.errorCallback,s=c.progressCallback;l<u;l++)try{e=o.call(i||o.this,l)}catch(n){return f&&f.call(i||f.this,n),void r.dispose()}u<t?(u+=n,s&&s.call(i||s.this,l,e),p(this)):l===t&&(r.func=o,r.executionCount++,a&&a.call(i||a.this,e))},p(this),this.notifier}}]),n}();x.HIGH=0,x.NORMAL=1,x.LOW=2,x.allowedTickCount=100;t.default=x}])});